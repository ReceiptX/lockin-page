!function(){"use strict";if(window.LockInInitialized)return;window.LockInInitialized=!0;const n={licenseKey:"",password:"",title:"Access Required",message:"Please enter the password to continue",placeholder:"Enter password",submitText:"Submit",errorMessage:"Incorrect password. Please try again.",showBranding:!0,maxAttempts:0,brandingText:"Protected by LockIn",brandingLink:"https://github.com/ReceiptX/lockin-page"};function e(n){let e=0;for(let t=0;t<n.length;t++){e=(e<<5)-e+n.charCodeAt(t),e&=e}return e.toString(36)}function t(t){t.preventDefault();const o=document.getElementById("lockin-password"),i=document.getElementById("lockin-error"),s=document.getElementById("lockin-modal");if(o.value===n.password)sessionStorage.setItem("lockin_auth",JSON.stringify({key:n.licenseKey,hash:e(n.password),timestamp:Date.now()})),function(){const n=document.getElementById("lockin-overlay");n&&(n.style.animation="lockin-fadein 0.2s ease-out reverse",setTimeout(()=>{n.remove(),document.body.style.overflow=""},200))}();else if(i.textContent=n.errorMessage,i.style.display="block",o.value="",o.focus(),s.classList.add("shake"),setTimeout(()=>s.classList.remove("shake"),400),n.maxAttempts>0){const e=parseInt(sessionStorage.getItem("lockin_attempts")||"0",10)+1;sessionStorage.setItem("lockin_attempts",e.toString()),e>=n.maxAttempts?(i.textContent="Maximum attempts reached. Please contact the administrator.",o.disabled=!0,document.getElementById("lockin-submit").disabled=!0):n.maxAttempts-e<=2&&(i.textContent=`${n.errorMessage} (${n.maxAttempts-e} attempts remaining)`)}}function o(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}!function i(){if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",i);if(!function(){const e=document.getElementsByTagName("script");let t=null;for(let n=0;n<e.length;n++)if((e[n].src||"").includes("lockin")||e[n].hasAttribute("data-lockin-key")){t=e[n];break}if(!t)return void console.error("LockIn: Could not find script tag");n.licenseKey=t.getAttribute("data-lockin-key")||"",n.password=t.getAttribute("data-lockin-password")||"",n.title=t.getAttribute("data-lockin-title")||n.title,n.message=t.getAttribute("data-lockin-message")||n.message,n.placeholder=t.getAttribute("data-lockin-placeholder")||n.placeholder,n.submitText=t.getAttribute("data-lockin-submit")||n.submitText,n.errorMessage=t.getAttribute("data-lockin-error")||n.errorMessage,n.maxAttempts=parseInt(t.getAttribute("data-lockin-max-attempts")||"0",10);const o=t.getAttribute("data-lockin-branding");return n.showBranding="hide"!==o&&"false"!==o,n.licenseKey?!!n.password||(console.error("LockIn: Password is required (data-lockin-password)"),!1):(console.error("LockIn: License key is required (data-lockin-key)"),!1)}())return;if(function(){const t=sessionStorage.getItem("lockin_auth");if(t)try{const o=JSON.parse(t);return o.key===n.licenseKey&&o.hash===e(n.password)}catch(n){return!1}return!1}())return;!function(){const e=`\n      <div id="lockin-overlay" style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.95);\n        z-index: 2147483647;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        animation: lockin-fadein 0.3s ease-in;\n      ">\n        <div id="lockin-modal" style="\n          background: #ffffff;\n          border-radius: 12px;\n          padding: 40px;\n          max-width: 400px;\n          width: 90%;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n          animation: lockin-slideup 0.4s ease-out;\n        ">\n          <h2 style="\n            margin: 0 0 12px 0;\n            font-size: 24px;\n            font-weight: 600;\n            color: #1a1a1a;\n            text-align: center;\n          ">${o(n.title)}</h2>\n          \n          <p style="\n            margin: 0 0 24px 0;\n            font-size: 14px;\n            color: #666;\n            text-align: center;\n            line-height: 1.5;\n          ">${o(n.message)}</p>\n          \n          <form id="lockin-form" style="margin: 0;">\n            <input \n              type="password" \n              id="lockin-password" \n              placeholder="${o(n.placeholder)}"\n              autocomplete="off"\n              style="\n                width: 100%;\n                padding: 12px 16px;\n                font-size: 16px;\n                border: 2px solid #e0e0e0;\n                border-radius: 8px;\n                box-sizing: border-box;\n                margin-bottom: 16px;\n                transition: border-color 0.2s;\n                font-family: inherit;\n              "\n              onfocus="this.style.borderColor='#4285f4'; this.style.outline='none';"\n              onblur="this.style.borderColor='#e0e0e0';"\n            />\n            \n            <button \n              type="submit" \n              id="lockin-submit"\n              style="\n                width: 100%;\n                padding: 12px 16px;\n                font-size: 16px;\n                font-weight: 600;\n                color: #ffffff;\n                background: #4285f4;\n                border: none;\n                border-radius: 8px;\n                cursor: pointer;\n                transition: background 0.2s;\n                font-family: inherit;\n              "\n              onmouseover="this.style.background='#3367d6';"\n              onmouseout="this.style.background='#4285f4';"\n            >${o(n.submitText)}</button>\n          </form>\n          \n          <div id="lockin-error" style="\n            margin-top: 16px;\n            padding: 12px;\n            background: #fee;\n            border: 1px solid #fcc;\n            border-radius: 6px;\n            color: #c33;\n            font-size: 14px;\n            text-align: center;\n            display: none;\n          "></div>\n          \n          ${n.showBranding?`\n          <div style="\n            margin-top: 24px;\n            text-align: center;\n            font-size: 12px;\n            color: #999;\n          ">\n            <a href="${o(n.brandingLink)}" target="_blank" rel="noopener" style="\n              color: #999;\n              text-decoration: none;\n              transition: color 0.2s;\n            " onmouseover="this.style.color='#666';" onmouseout="this.style.color='#999';">\n              ${o(n.brandingText)}\n            </a>\n          </div>\n          `:""}\n        </div>\n      </div>\n      \n      <style>\n        @keyframes lockin-fadein {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        @keyframes lockin-slideup {\n          from { \n            opacity: 0;\n            transform: translateY(20px);\n          }\n          to { \n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes lockin-shake {\n          0%, 100% { transform: translateX(0); }\n          25% { transform: translateX(-10px); }\n          75% { transform: translateX(10px); }\n        }\n        \n        #lockin-modal.shake {\n          animation: lockin-shake 0.4s ease-in-out;\n        }\n      </style>\n    `;document.body.style.overflow="hidden";const t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t.firstElementChild)}();const s=document.getElementById("lockin-form");s&&(s.addEventListener("submit",t),setTimeout(()=>{const n=document.getElementById("lockin-password");n&&n.focus()},100))}()}();